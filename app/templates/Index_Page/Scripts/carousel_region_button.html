<script>
    const carousel = document.getElementById('etfCarousel');
    if (!carousel) return;

    const carouselInstance = new bootstrap.Carousel(carousel, { interval: false });
    const regionButtons = document.querySelectorAll('[data-bs-slide-to]');

    function setActiveButton(index) {
        regionButtons.forEach(btn => btn.classList.remove('active'));
        if (regionButtons[index]) {
            regionButtons[index].classList.add('active');
        }
    }

    // Make US active on page load
    setActiveButton(0);

    // Handle region button clicks
    regionButtons.forEach((btn, index) => {
        btn.addEventListener('click', () => {
            carouselInstance.to(index); // move carousel
            setActiveButton(index);     // update button state
        });
    });

    // Handle left/right arrow navigation
    document.getElementById('prev-region').addEventListener('click', () => {
        const currentIndex = Array.from(regionButtons).findIndex(btn => btn.classList.contains('active'));
        const prev = (currentIndex - 1 + regionButtons.length) % regionButtons.length;
        carouselInstance.to(prev);
        setActiveButton(prev);
    });

    document.getElementById('next-region').addEventListener('click', () => {
        const currentIndex = Array.from(regionButtons).findIndex(btn => btn.classList.contains('active'));
        const next = (currentIndex + 1) % regionButtons.length;
        carouselInstance.to(next);
        setActiveButton(next);
    });
</script>




